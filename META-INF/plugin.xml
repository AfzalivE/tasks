<!--
  ~ Copyright 2013 Sergiy Dubovik, WarnerJan Veldhuis
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~ http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->

<idea-plugin url="http://www.jetbrains.net/confluence/display/CONTEST/Tasks" version="2">
    <id>org.dubik.tasks.Tasks</id>
    <name>Tasks</name>
    <description>
        <![CDATA[
        <p>A plugin for creating and editing list of daily tasks.</p>
        <p>Since I used this plugin in the past, and it wasn't updated, I asked permission of
        the original author Sergiy Dubovik if I could continue development. He was kind enough
        to let me, so I forked it.</p>

        <p>To contact me directly: nlsurfman@hotmail.com</p>
        <p>Bugs can be reported here: https://github.com/NLSurfMan/tasks/issues</p>
        <p>Comments can be left here: http://confluence.jetbrains.com/display/CONTEST/Tasks</p>
        ]]>
    </description>
    <change-notes>
        <![CDATA[
        <p><u><b>Version 1.8 changes</b></u></p>
         //Todo: update for final release!

        <p><u><b>Version 1.7 changes</b></u></p>
        <ul>
            <li>Tooltip shows overview of hovered task if it has sub-tasks.</li>
            <li>Shortcuts added for task manipulation. Settings->Keymap->Plugins->Tasks or open
                popup menu.</li>
            <li>Priority can now be propagated to upper tasks, you have to switch that feature on
                in Settings->Tasks->Propagate priority to upper task.</li>
            <li>Tasks can be exported to a file or a clipboard.</li>
            <li>Tasks stored in separate file (tasks.xml) in IntelliJ IDEA config directory.</li>
            <li>Task can be highlighted using red, yellow and red star.</li>
        </ul>
        
        <p><u><b>Version 1.6 changes</b></u></p>
        <ul>
            <li>Added new action: Create new change list with the title of selected task(s).
                If several tasks are selected then titles will be concatanated and separated by comma.</li>
            <li>Tasks can be reordered.</li>*
            <li>Completed tasks can be hidden.</li>
            <li>Added "Add to Root" button when create new task.</li>
        </ul>
        
        <p><u><b>Version 1.5 changes</b></u></p>
        <ul>
            <li>FIXED: Assertion failure when updating task properties</li>
            <li>Added debug info generation to build.xml and to plugin binaries</li>
        </ul>

        <p><u><b>Version 1.4 changes</b></u></p>
        <ul>
            <li>Removed unused classes</li>
            <li>Added build.xml to source package</li>
            <li>Documentation added</li>
        </ul>
        
        <p><u><b>Version 1.3 changes</b></u></p>
        <ul>
            <li>Tasks can have sub-tasks. Depth level is not limited. Completions, estimated and actual time are
                propagated to the upper level task</li>
            <li>Actual time is implemented, after you complete a task you can specify how long did it take.
                It's not used anywhere though, but you may wish to track your taks estimation accuracy.</li>
            <li>Actual time feature is disabled by default, to enable it go to IntelliJ Idea settings and open
                Tasks configuration panel</li>
            <li>If you delete more then 1 task you will be asked for a confirmation</li>
            <li>Create Task from TODO intention. If you have a todo item and place a cursor on it, you will be able
                create a task with todo text (alt+enter).</li>
        </ul>

        <p><u><b>Version 1.2 changes</b></u></p>
        <ul>
            <li>Scroll bars appear if content of Tasks's tree can't fit tool window</li>
            <li>Task(s) can be highlighted, i.e. small star appears right in front of it(them)</li>
            <li>Estimation time for a task can be set up to 150h (9000minutes)</li>
            <li>When tasks a grouped by priority important group comes first</li>
            <li>"Not sure" priority changed to "Low", "Important" changed to "High", added icon for low priority task</li>
            <li>When you group by priority tree is expended by default</li>
            <li>UI cleanup, some borders removed, spaces added</li>
        </ul>
        
		<p><u><b>Version 1.1 changes</b></u></p>
		<ul>
		    <li>Urls and contact information updated.</li>
	    </ul>
        ]]>
    </change-notes>
    <version>1.8</version>
    <vendor logo="/org/dubik/tasks/ui/icons/task.png" email="ideatasks@gmail.com"
            url="http://www.jetbrains.net/confluence/display/CONTEST/Tasks">
        WarnerJan Veldhuis (Original author: Sergiy Dubovik)
    </vendor>
    <idea-version since-build="4267"/>

    <resource-bundle>org.dubik.tasks.TasksBundle</resource-bundle>

    <application-components>
        <component>
            <implementation-class>org.dubik.tasks.TasksApplicationComponent</implementation-class>
        </component>
    </application-components>

    <project-components>
        <component>
            <implementation-class>org.dubik.tasks.TasksProjectComponent</implementation-class>
            <loadForDefaultProject/>
        </component>
    </project-components>

    <actions>
        <action id="TaskGroupByPriority" class="org.dubik.tasks.ui.actions.GroupByPriorityAction"
                text="Group by priority" description="Group by priority"/>

        <action id="MarkCompletedAction" class="org.dubik.tasks.ui.actions.MarkCompletedAction" text="Mark completed"
                description="Mark task as completed" icon="/org/dubik/tasks/ui/icons/complete_task.png">
            <keyboard-shortcut first-keystroke="control p" keymap="$default"/>
        </action>

        <action id="MarkNotCompletedAction" class="org.dubik.tasks.ui.actions.MarkNotCompletedAction"
                icon="/org/dubik/tasks/ui/icons/task.png" text="Mark as not completed"
                description="Mark task as not completed">
            <keyboard-shortcut first-keystroke="control shift p" keymap="$default"/>
        </action>

        <action id="HighlightTaskAction" class="org.dubik.tasks.ui.actions.HighlightTaskAction" text="Highlight Task"
                description="Highlight task" icon="/org/dubik/tasks/ui/icons/star.png">
            <keyboard-shortcut first-keystroke="SPACE" keymap="$default"/>
        </action>

        <action id="MoveTaskUpAction" class="org.dubik.tasks.ui.actions.MoveTaskUpAction" text="Move task up"
                icon="/actions/moveUp.png" description="Move task up">
            <keyboard-shortcut first-keystroke="alt UP" keymap="$default"/>
        </action>

        <action id="MoveTaskDownAction" class="org.dubik.tasks.ui.actions.MoveTaskDownAction" text="Move task down"
                icon="/actions/moveDown.png" description="Move task down">
            <keyboard-shortcut first-keystroke="alt DOWN" keymap="$default"/>
        </action>

        <action id="ToggleCompletedTaskVisibleAction"
                class="org.dubik.tasks.ui.actions.ToggleCompletedTaskVisibleAction" text="Hide completed tasks"
                icon="/actions/showHiddens.png" description="Hide/unhide completed tasks"/>

        <action id="NewChangelistAction" class="org.dubik.tasks.ui.actions.NewChangeListAction"
                text="Create New Change List" description="Creates new change list based on the task"
                icon="/org/dubik/tasks/ui/icons/newchangelist.png">
            <keyboard-shortcut first-keystroke="alt INSERT" keymap="$default"/>
        </action>

        <action id="ExportToTextFileAction" class="org.dubik.tasks.ui.actions.ExportToTextFileAction"
                icon="/actions/export.png" text="Export Tasks to File"
                description="Exports all tasks to a text file or clipboard."/>

        <action id="HighlightRedTaskAction" class="org.dubik.tasks.ui.actions.highlight.HighlightRedTaskAction"
                text="Red" description="Highlight task with red star" icon="/org/dubik/tasks/ui/icons/star_red.png"/>

        <action id="HighlightYellowTaskAction" class="org.dubik.tasks.ui.actions.highlight.HighlightYellowTaskAction"
                text="Yellow" description="Highlight task with red star" icon="/org/dubik/tasks/ui/icons/star_yellow.png"/>

        <action id="HighlightGreenTaskAction" class="org.dubik.tasks.ui.actions.highlight.HighlightGreenTaskAction"
                text="Green" description="Highlight task with red star" icon="/org/dubik/tasks/ui/icons/star_green.png"/>

        <action id="AddNewTask" class="org.dubik.tasks.ui.actions.AddNewTaskAction" text="Add Task..."
                description="Add new task" icon="/org/dubik/tasks/ui/icons/add_task.png">
            <keyboard-shortcut first-keystroke="INSERT" keymap="$default"/>
        </action>

        <action id="RemoveTaskAction" class="org.dubik.tasks.ui.actions.RemoveTaskAction" text="Remove Task"
                description="Remove selected task" icon="/org/dubik/tasks/ui/icons/remove_task.png">
            <keyboard-shortcut first-keystroke="DELETE" keymap="$default"/>
        </action>

        <action id="TaskPropertyAction" class="org.dubik.tasks.ui.actions.TaskPropertyAction" text="Task properties"
                description="Task properties" icon="/actions/properties.png">
            <keyboard-shortcut first-keystroke="control ENTER" keymap="$default"/>
        </action>

        <action id="StartTaskAction" class="org.dubik.tasks.ui.actions.StartTaskAction" text="Start Task"
                description="Starts the actual time for the selected task" icon="/org/dubik/tasks/ui/icons/start.png">
        </action>

        <action id="StopTaskAction" class="org.dubik.tasks.ui.actions.StopTaskAction" text="Stop Task"
                description="Stops the actual time for the selected task" icon="/org/dubik/tasks/ui/icons/stop.png">
        </action>

        <group id="TasksActionGroup" class="com.intellij.openapi.actionSystem.DefaultActionGroup">
            <reference ref="AddNewTask"/>
            <reference ref="RemoveTaskAction"/>
            <separator/>
            <reference ref="MarkCompletedAction"/>
            <reference ref="MarkNotCompletedAction"/>
            <separator/>
            <reference ref="ToggleCompletedTaskVisibleAction"/>
            <reference ref="ExportToTextFileAction"/>
            <reference ref="TaskPropertyAction"/>
        </group>

        <group id="TasksPopupGroup">
            <reference ref="AddNewTask"/>
            <reference ref="RemoveTaskAction"/>
            <reference ref="MarkCompletedAction"/>
            <reference ref="MarkNotCompletedAction"/>
            <separator/>
            <reference ref="HighlightTaskAction"/>
            <separator/>
            <reference ref="TaskGroupByPriority"/>
            <separator/>
            <reference ref="ToggleCompletedTaskVisibleAction"/>
            <reference ref="ExportToTextFileAction"/>
            <separator/>
            <reference ref="TaskPropertyAction"/>
        </group>

        <group id="TasksAdditionalToolBarGroup">
            <reference ref="MoveTaskUpAction"/>
            <reference ref="MoveTaskDownAction"/>
            <reference ref="NewChangelistAction"/>
            <separator/>
            <reference ref="StartTaskAction"/>
            <reference ref="StopTaskAction"/>
        </group>
    </actions>

    <extensions defaultExtensionNs="com.intellij">
        <applicationService serviceInterface="org.dubik.tasks.settings.TaskSettingsService" serviceImplementation="org.dubik.tasks.settings.TaskSettingsService" />
        <applicationService serviceInterface="org.dubik.tasks.model.ITaskModel" serviceImplementation="org.dubik.tasks.model.impl.TaskModel" />
        <applicationConfigurable instance="org.dubik.tasks.ui.forms.TasksSettingsForm"  />

        <intentionAction>
            <className>org.dubik.tasks.intention.CreateTaskFromTodoIntention</className>
            <categoryKey>intention.familyname</categoryKey>
        </intentionAction>
    </extensions>

</idea-plugin>